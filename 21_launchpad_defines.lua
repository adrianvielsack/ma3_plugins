clrMap = {
    [0] = { r = 0, g = 0, b = 0 },
    [1] = { r = 132, g = 132, b = 132 },
    [2] = { r = 200, g = 200, b = 200 },
    [3] = { r = 255, g = 255, b = 255 },
    [4] = { r = 255, g = 132, b = 132 },
    [5] = { r = 255, g = 0, b = 0 },
    [6] = { r = 200, g = 0, b = 0 },
    [7] = { r = 132, g = 0, b = 0 },
    [8] = { r = 255, g = 235, b = 187 },
    [9] = { r = 255, g = 132, b = 0 },
    [10] = { r = 200, g = 69, b = 0 },
    [11] = { r = 132, g = 33, b = 0 },
    [12] = { r = 255, g = 227, b = 103 },
    [13] = { r = 255, g = 255, b = 0 },
    [14] = { r = 200, g = 200, b = 0 },
    [15] = { r = 132, g = 132, b = 0 },
    [16] = { r = 200, g = 255, b = 103 },
    [17] = { r = 156, g = 255, b = 0 },
    [18] = { r = 103, g = 200, b = 0 },
    [19] = { r = 51, g = 132, b = 0 },
    [20] = { r = 156, g = 255, b = 132 },
    [21] = { r = 0, g = 255, b = 0 },
    [22] = { r = 0, g = 200, b = 0 },
    [23] = { r = 0, g = 132, b = 0 },
    [24] = { r = 156, g = 255, b = 156 },
    [25] = { r = 0, g = 255, b = 69 },
    [26] = { r = 0, g = 200, b = 33 },
    [27] = { r = 0, g = 132, b = 16 },
    [28] = { r = 156, g = 255, b = 172 },
    [29] = { r = 0, g = 255, b = 172 },
    [30] = { r = 0, g = 200, b = 103 },
    [31] = { r = 0, g = 132, b = 51 },
    [32] = { r = 156, g = 255, b = 235 },
    [33] = { r = 0, g = 255, b = 219 },
    [34] = { r = 0, g = 200, b = 156 },
    [35] = { r = 0, g = 132, b = 85 },
    [36] = { r = 156, g = 235, b = 255 },
    [37] = { r = 0, g = 227, b = 255 },
    [38] = { r = 0, g = 164, b = 200 },
    [39] = { r = 0, g = 103, b = 132 },
    [40] = { r = 156, g = 200, b = 255 },
    [41] = { r = 0, g = 164, b = 255 },
    [42] = { r = 0, g = 103, b = 200 },
    [43] = { r = 0, g = 51, b = 132 },
    [44] = { r = 103, g = 69, b = 255 },
    [45] = { r = 0, g = 0, b = 255 },
    [46] = { r = 0, g = 0, b = 200 },
    [47] = { r = 0, g = 0, b = 132 },
    [48] = { r = 172, g = 132, b = 255 },
    [49] = { r = 103, g = 0, b = 255 },
    [50] = { r = 51, g = 0, b = 200 },
    [51] = { r = 33, g = 0, b = 132 },
    [52] = { r = 255, g = 132, b = 255 },
    [53] = { r = 255, g = 0, b = 255 },
    [54] = { r = 200, g = 0, b = 200 },
    [55] = { r = 132, g = 0, b = 132 },
    [56] = { r = 255, g = 132, b = 187 },
    [57] = { r = 255, g = 0, b = 156 },
    [58] = { r = 200, g = 0, b = 103 },
    [59] = { r = 132, g = 0, b = 69 },
    [60] = { r = 255, g = 33, b = 0 },
    [61] = { r = 219, g = 132, b = 0 },
    [62] = { r = 200, g = 156, b = 0 },
    [63] = { r = 103, g = 103, b = 0 },
    [64] = { r = 0, g = 132, b = 0 },
    [65] = { r = 0, g = 132, b = 69 },
    [66] = { r = 0, g = 69, b = 187 },
    [67] = { r = 0, g = 0, b = 255 },
    [68] = { r = 0, g = 132, b = 132 },
    [69] = { r = 69, g = 0, b = 235 },
    [70] = { r = 172, g = 132, b = 156 },
    [71] = { r = 69, g = 33, b = 51 },
    [72] = { r = 255, g = 0, b = 0 },
    [73] = { r = 235, g = 255, b = 103 },
    [74] = { r = 227, g = 250, b = 0 },
    [75] = { r = 172, g = 255, b = 0 },
    [76] = { r = 33, g = 200, b = 0 },
    [77] = { r = 0, g = 255, b = 172 },
    [78] = { r = 0, g = 219, b = 255 },
    [79] = { r = 0, g = 103, b = 255 },
    [80] = { r = 69, g = 0, b = 255 },
    [81] = { r = 172, g = 0, b = 250 },
    [82] = { r = 227, g = 69, b = 200 },
    [83] = { r = 103, g = 33, b = 0 },
    [84] = { r = 255, g = 103, b = 0 },
    [85] = { r = 200, g = 245, b = 0 },
    [86] = { r = 187, g = 255, b = 69 },
    [87] = { r = 0, g = 255, b = 0 },
    [88] = { r = 132, g = 255, b = 103 },
    [89] = { r = 172, g = 250, b = 187 },
    [90] = { r = 132, g = 255, b = 240 },
    [91] = { r = 172, g = 211, b = 255 },
    [92] = { r = 103, g = 156, b = 240 },
    [93] = { r = 187, g = 156, b = 245 },
    [94] = { r = 245, g = 69, b = 255 },
    [95] = { r = 255, g = 0, b = 172 },
    [96] = { r = 255, g = 156, b = 0 },
    [97] = { r = 235, g = 227, b = 0 },
    [98] = { r = 211, g = 255, b = 0 },
    [99] = { r = 200, g = 172, b = 0 },
    [100] = { r = 132, g = 103, b = 0 },
    [101] = { r = 0, g = 143, b = 33 },
    [102] = { r = 33, g = 156, b = 69 },
    [103] = { r = 51, g = 51, b = 103 },
    [104] = { r = 51, g = 69, b = 172 },
    [105] = { r = 172, g = 117, b = 51 },
    [106] = { r = 200, g = 0, b = 0 },
    [107] = { r = 245, g = 132, b = 103 },
    [108] = { r = 245, g = 143, b = 33 },
    [109] = { r = 255, g = 235, b = 69 },
    [110] = { r = 219, g = 245, b = 103 },
    [111] = { r = 187, g = 227, b = 33 },
    [112] = { r = 51, g = 51, b = 103 },
    [113] = { r = 245, g = 245, b = 187 },
    [114] = { r = 200, g = 250, b = 211 },
    [115] = { r = 219, g = 219, b = 255 },
    [116] = { r = 211, g = 187, b = 255 },
    [117] = { r = 132, g = 132, b = 132 },
    [118] = { r = 187, g = 187, b = 187 },
    [119] = { r = 245, g = 255, b = 255 },
    [120] = { r = 219, g = 0, b = 0 },
    [121] = { r = 117, g = 0, b = 0 },
    [122] = { r = 51, g = 240, b = 0 },
    [123] = { r = 0, g = 132, b = 0 },
    [124] = { r = 235, g = 227, b = 0 },
    [125] = { r = 132, g = 103, b = 0 },
    [126] = { r = 227, g = 156, b = 0 },
    [127] = { r = 156, g = 33, b = 0 },
}
local function matchExp(a, b)
    return math.abs(a - b)
end
function matchColor(r, g, b, dim)
    r = r * dim / 255
    g = g * dim / 255
    b = b * dim / 255
    bestMatch = 0
    matchFactor = 255 * 3
    for i = 0, 127 do
        currentMatch = matchExp(r, clrMap[i].r) + matchExp(g, clrMap[i].g) + matchExp(b, clrMap[i].b)
        if currentMatch < matchFactor then
            bestMatch = i
            matchFactor = currentMatch
        end
    end
    return bestMatch
end
